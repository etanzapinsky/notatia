{% extends "base.html" %}
{% load staticfiles %}

{% block styles %}
<link rel="stylesheet" type="text/css" href="{% static 'css/jquery.tagsinput.css' %}">
{% endblock %}

{% block scripts %}
<script src="{% static 'js/feed.js' %}"></script>
<script src="{% static 'js/jquery.tagsinput.min.js' %}"></script>
{% endblock %}

{% block content %}
{% csrf_token %}


<div class="container">
	
<div>
  <div class="login">Welcome {{ user }}!</div>
  <div class="login"><a href="{% url 'logout' %}">Logout</a></div>
  <div class="login"><a href="#/new">New Capsule</a></div>
</div>
		
<div class="page"></div>

</div>

<script type="text/template" id="edit-capsule-template">
<div class="addcapsule">
<h1><%= capsule ? 'Update' : 'Create' %> Capsule</h1>
  <form class="edit-capsule-form">
  	<input type="text"  name="title" value="<%= capsule ? capsule.get('title') : '' %>"/>
    <textarea id="text" name="text" placeholder="Capsule text goes here"><%= capsule ? capsule.get('text') : '' %></textarea>
    <!--<input name="tags" id="tags" value="<%= capsule ? capsule.get('tags') : '' %>" />-->
	<% if(capsule) { %>
		<input type="hidden" name="id" value="<%= capsule.id %>" />
	<% }; %>
    <div id="form_float">
      <button type="submit" id="add_capsule"><%= capsule ? 'Update' : '+' %></button>
    </div>
  </form> 
</div>
</script>

<script type="text/template" id="capsule-list-template">

<table class="table striped">
<thead>
<tr>
<th>Title</th>
<th>Text</th>
<th></th>
</tr>
</thead>
<tbody>
	<% _.each(capsules, function(capsule) { %>
		<tr>
			<td><%= capsule.get('title')%></td>
			<td><%= capsule.get('text')%></td>
			<td><a href='#/edit/<%= capsule.id %>'>Edit</a></td>
		</tr>
	<% }) %>
</tbody>
</table>
</script>




{% endblock %}
